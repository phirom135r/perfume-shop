<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">
<head>
    <title>Products</title>
</head>

<body>
<div layout:fragment="content">

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-0">Products</h5>
        <a class="btn btn-primary" th:href="@{/admin/products/create}">
            <i class="bi bi-plus-lg"></i> Add Product
        </a>
    </div>

    <div class="card shadow-sm">
        <div class="table-responsive">
            <table class="table table-hover mb-0 align-middle">
                <thead class="table-light">
                <tr>
                    <th style="width:70px;">ID</th>
                    <th style="width:80px;">Image</th>
                    <th>Name</th>
                    <th>Brand</th>
                    <th>Category</th>
                    <th class="text-end">Price</th>
                    <th class="text-end">Discount</th>
                    <th class="text-end">Stock</th>
                    <th style="width:180px;">Action</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p : ${products}">
                    <td th:text="${p.id}"></td>

                    <td>
                        <img th:if="${p.image != null}"
                             th:src="@{'/uploads/products/' + ${p.image}}"
                             style="width:46px;height:46px;object-fit:cover;border-radius:10px;border:1px solid #e2e8f0;">
                        <span th:if="${p.image == null}" class="text-muted small">No</span>
                    </td>

                    <td th:text="${p.name}"></td>
                    <td th:text="${p.brand}"></td>
                    <td th:text="${p.category.name}"></td>
                    <td class="text-end" th:text="${p.price}"></td>
                    <td class="text-end" th:text="${p.discount}"></td>
                    <td class="text-end" th:text="${p.stock}"></td>

                    <td>
                        <a class="btn btn-sm btn-outline-secondary"
                           th:href="@{'/admin/products/edit/' + ${p.id}}">
                            Edit
                        </a>

                        <form th:action="@{'/admin/products/delete/' + ${p.id}}"
                              method="post" style="display:inline;">
                            <button class="btn btn-sm btn-outline-danger"
                                    onclick="return confirm('Delete this product?')">
                                Delete
                            </button>
                        </form>
                    </td>

                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>
</body>
</html>