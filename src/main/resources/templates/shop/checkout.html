<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">

<h3>Checkout</h3>

<div class="mb-3">
    <input id="name" class="form-control" placeholder="Customer Name">
</div>

<div class="mb-3">
    <input id="phone" class="form-control" placeholder="Phone">
</div>

<div class="mb-3">
    <textarea id="address" class="form-control" placeholder="Address"></textarea>
</div>

<button class="btn btn-primary" onclick="submitOrder()">Place Order</button>

<script>
    function submitOrder() {

        const data = {
            customerName: document.getElementById("name").value,
            phone: document.getElementById("phone").value,
            address: document.getElementById("address").value,
            paymentMethod: "CASH",
            items: [
                {
                    productId: 1,
                    qty: 1
                }
            ]
        };

        fetch("/checkout", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        })
            .then(res => res.text())
            .then(orderNo => {
                alert("Order Created: " + orderNo);
            });
    }
</script>

</body>
</html>